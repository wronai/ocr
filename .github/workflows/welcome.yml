name: Welcome New Contributors

on:
  issues:
    types: [opened]
  pull_request:
    types: [opened]

jobs:
  welcome:
    runs-on: ubuntu-latest
    steps:
      - name: Welcome New Issue Creator
        if: github.event_name == 'issues'
        uses: actions/github-script@v6
        with:
          script: |
            // Check if this is the user's first issue
            const creator = context.payload.sender.login;
            const issues = await github.rest.issues.listForRepo({
              owner: context.repo.owner,
              repo: context.repo.repo,
              creator: creator,
              state: 'all'
            });
            
            if (issues.data.length === 1) {
              await github.rest.issues.createComment({
                issue_number: context.issue.number,
                owner: context.repo.owner,
                repo: context.repo.repo,
                body: `
                ğŸ‰ **Witaj w spoÅ‚ecznoÅ›ci PDF OCR Processor!**
                
                DziÄ™kujemy za pierwsze zgÅ‚oszenie! Oto kilka przydatnych linkÃ³w:
                
                - ğŸ“š [Dokumentacja](../README.md)
                - ğŸš€ [Przewodnik szybkiego startu](../QUICK_START.md)
                - ğŸ’¡ [PrzykÅ‚ady uÅ¼ycia](../EXAMPLES.md)
                - ğŸ¤ [Przewodnik dla kontrybutorÃ³w](../CONTRIBUTING.md)
                
                JeÅ›li to twÃ³j pierwszy raz z OCR lub Ollama, sprawdÅº nasz FAQ! 
                Maintainerzy odpowiedzÄ… jak najszybciej. ğŸš€
                `
              });
            }

      - name: Welcome New PR Creator
        if: github.event_name == 'pull_request'
        uses: actions/github-script@v6
        with:
          script: |
            // Check if this is the user's first PR
            const creator = context.payload.sender.login;
            const prs = await github.rest.pulls.list({
              owner: context.repo.owner,
              repo: context.repo.repo,
              creator: creator,
              state: 'all'
            });
            
            if (prs.data.length === 1) {
              await github.rest.issues.createComment({
                issue_number: context.issue.number,
                owner: context.repo.owner,
                repo: context.repo.repo,
                body: `
                ğŸ‰ **DziÄ™kujemy za pierwszy Pull Request!**
                
                To Å›wietne Å¼e chcesz przyczyniÄ‡ siÄ™ do rozwoju projektu! 
                
                **NastÄ™pne kroki:**
                - âœ… SprawdÅº czy wszystkie testy przechodzÄ…
                - ğŸ“ Upewnij siÄ™ Å¼e dokumentacja jest aktualna
                - ğŸ” Poczekaj na code review od maintainerÃ³w
                
                JeÅ›li masz pytania, napisz komentarz! ğŸš€
                `
              });
            }
